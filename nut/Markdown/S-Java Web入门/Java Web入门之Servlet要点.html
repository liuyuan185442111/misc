<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Java Web入门之Servlet要点</title>
<link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css" />
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body><div class="container"><p>Servlet是Java Web技术的核心基础，它是遵循Java Servlet规范的Java类，由web服务器端的jvm执行，是符合“请求-响应”访问模式的应用程序。Servlet通常用于在服务器端完成访问数据库、调用JavaBean等业务性操作。 <br>
Servlet的核心方法是service()，默认service()的功能是调用doGet()和doPost()，直接用浏览器访问Servlet相当于调用get方法。由于service方法会自动调用doGet()和doPost()，所以在实际编程中，不需要编写service方法，只需要编写doGet()和doPost()。doPost可以直接调用doGet，除非Servlet对于GET请求和POST请求的处理方式不一致。 <br>
不同于JavaBean，Servlet需要在web.xml里注册后才能生效。 <br>
更改或添加Servlet必须重启tomcat才能生效，修改web.xml不需要重启服务器。</p>

<p>下面是一个简单的Servlet。 <br>
javax包在servlet-api.jar里，如用javac命令编译Servlet，需要在环境变量classpath里加上“tomcat根目录\lib\servlet-api.jar”。</p>

<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">package</span> test;
<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.io.PrintWriter;
<span class="hljs-keyword">import</span> javax.servlet.ServletContext;
<span class="hljs-keyword">import</span> javax.servlet.ServletException;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ServletTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span>
{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title">ServletTest</span>()
    {
        <span class="hljs-keyword">super</span>();
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span>()
    {
        <span class="hljs-keyword">super</span>.destroy();
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span>() <span class="hljs-keyword">throws</span> ServletException {}

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span>(HttpServletRequest request, HttpServletResponse response)
    <span class="hljs-keyword">throws</span> ServletException, IOException
    {
        request.setCharacterEncoding(<span class="hljs-string">"utf-8"</span>);
        response.setContentType(<span class="hljs-string">"text/html;charset=utf-8"</span>);
        PrintWriter out = response.getWriter();
        out.println(<span class="hljs-string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;A Servlet Test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;"</span>);
        String name = request.getParameter(<span class="hljs-string">"name"</span>);
        out.print(<span class="hljs-string">"你好！欢迎"</span>+name+<span class="hljs-string">"使用servlet!&lt;br&gt;"</span>);
        out.print(<span class="hljs-string">"你请求的servlet是："</span> + <span class="hljs-keyword">this</span>.getClass());
        out.println(<span class="hljs-string">"&lt;/body&gt;&lt;/html&gt;"</span>);
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span>(HttpServletRequest request, HttpServletResponse response) <span class="hljs-keyword">throws</span> ServletException, IOException
    {
        doGet(request, response);
    }
}</code></pre>

<p>web.xml里的相应配置</p>



<pre class="prettyprint"><code class="language-xml hljs "><span class="hljs-comment">&lt;!-- servlet的名称和对应的servlet类路径 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">servlet</span>&gt;</span> 
        <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">servlet-class</span>&gt;</span>test.ServletTest<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-class</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">servlet</span>&gt;</span>
<span class="hljs-comment">&lt;!--访问这个servlet的url映射路径--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">servlet-mapping</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/abc/which.do<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">servlet-mapping</span>&gt;</span></code></pre>

<p>访问<a href="http://IP:PORT/project/abc/which.do">http://IP:PORT/project/abc/which.do</a>即可见到效果。</p>

<p>Servlet的API很多，这里就不说了。</p></div></body>
</html>