<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>两种字符串比较方法</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><p>c++中在将字符串做为map的key时，或对字符串进行排序时，需要提供比较方法，如果使用的是string，可以不用指定比较方法，因为标准库为basic_string定义了<code>bool operator&lt; (const string&amp; lhs, const string&amp; rhs);</code>，最终调用的是strcmp方法，然而有时候我们可能需要不一样的排序方式。下面提供了两种比较方法，compare_left和strcmp的比较方式是一样的，可以理解为将所有的字符串左对齐然后进行比较，compare_right则是先比较字符串长度，可以理解为将所有的字符串右对齐然后进行比较。</p>
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iterator&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">compare_left</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>p1<span class="token punctuation">,</span> size_t s1<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>p2<span class="token punctuation">,</span> size_t s2<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">int</span> cmp <span class="token operator">=</span> <span class="token function">memcmp</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> std<span class="token operator">::</span><span class="token function">min</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> cmp<span class="token punctuation">;</span>
	<span class="token keyword">return</span> s1 <span class="token operator">-</span> s2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">compare_right</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>p1<span class="token punctuation">,</span> size_t s1<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>p2<span class="token punctuation">,</span> size_t s2<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">int</span> cmp <span class="token operator">=</span> s1 <span class="token operator">-</span> s2<span class="token punctuation">)</span>
		<span class="token keyword">return</span> cmp<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">memcmp</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> <span class="token function">cmp_int</span><span class="token punctuation">(</span><span class="token keyword">int</span> k1<span class="token punctuation">,</span> <span class="token keyword">int</span> k2<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">char</span> buf1<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">char</span> buf2<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> s1 <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span>buf1<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> k1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> s2 <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span>buf2<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> k2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">compare_right</span><span class="token punctuation">(</span>buf1<span class="token punctuation">,</span> s1<span class="token punctuation">,</span> buf2<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">100000</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> t<span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>size<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		t<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	std<span class="token operator">::</span><span class="token function">random_shuffle</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> t<span class="token operator">+</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span><span class="token function">sort</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> t<span class="token operator">+</span>size<span class="token punctuation">,</span> cmp_int<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span>ostream_iterator<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">out_it</span><span class="token punctuation">(</span>std<span class="token operator">::</span>cout<span class="token punctuation">,</span> <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span><span class="token function">copy</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> t<span class="token operator">+</span>size<span class="token punctuation">,</span> out_it<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
</body>

</html>
