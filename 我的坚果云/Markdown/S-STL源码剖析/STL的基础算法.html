<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STL的基础算法</title>
<link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css" />
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body><div class="container"><p>STL中大部分算法定义于&lt;algorithms&gt;，此头文件定义了一系列用于元素序列上的函数。 <br>
几乎所有泛型算法的前两个参数都是一对迭代器，用以表示算法的操作区间。</p>

<p>STL标准并没有区分基本算法或复杂算法，然而sgi却把常用的一些算法定义于stl_algobase.h中，其他算法定义于stl_algo.h中。 <br>
stl_algobase.h中定义的算法有（我有意去掉了很多与理解无关的东西）：</p>



<pre class="prettyprint"><code class="language-cpp hljs "><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> ForwardIter1, <span class="hljs-keyword">typename</span> ForwardIter2&gt;
<span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> iter_swap(ForwardIter1 a, ForwardIter2 b)
{
    <span class="hljs-keyword">typename</span> iterator_traits&lt;ForwardIter1&gt;::value_type tmp = *a;
    *a = *b;
    *b = tmp;
}

<span class="hljs-comment">// iter_swap的两个参数类型应该相同, 而且应等价于swap(*a,*b), 所以我推荐使用swap, 不推荐用iter_swap</span>

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> swap(T&amp; a, T&amp; b)
{
    T tmp = a;
    a = b;
    b = tmp;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">inline</span> <span class="hljs-keyword">const</span> T&amp; min(<span class="hljs-keyword">const</span> T&amp; a, <span class="hljs-keyword">const</span> T&amp; b)
{
    <span class="hljs-keyword">return</span> b &lt; a ? b : a;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">inline</span> <span class="hljs-keyword">const</span> T&amp; max(<span class="hljs-keyword">const</span> T&amp; a, <span class="hljs-keyword">const</span> T&amp; b)
{
    <span class="hljs-keyword">return</span>  a &lt; b ? b : a;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> Compare&gt;
<span class="hljs-keyword">inline</span> <span class="hljs-keyword">const</span> T&amp; min(<span class="hljs-keyword">const</span> T&amp; a, <span class="hljs-keyword">const</span> T&amp; b, Compare comp)
{
    <span class="hljs-keyword">return</span> comp(b, a) ? b : a;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> Compare&gt;
<span class="hljs-keyword">inline</span> <span class="hljs-keyword">const</span> T&amp; max(<span class="hljs-keyword">const</span> T&amp; a, <span class="hljs-keyword">const</span> T&amp; b, Compare comp)
{
    <span class="hljs-keyword">return</span> comp(a, b) ? b : a;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> ForwardIter, <span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">void</span> fill(ForwardIter first, ForwardIter last, <span class="hljs-keyword">const</span> T&amp; value)
{
    <span class="hljs-keyword">for</span> ( ; first != last; ++first)
        *first = value;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> OutputIter, <span class="hljs-keyword">typename</span> Size, <span class="hljs-keyword">typename</span> T&gt;
OutputIter fill_n(OutputIter first, Size n, <span class="hljs-keyword">const</span> T&amp; value)
{
    <span class="hljs-keyword">for</span> ( ; n &gt; <span class="hljs-number">0</span>; --n, ++first)
        *first = value;
    <span class="hljs-keyword">return</span> first;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter1, <span class="hljs-keyword">typename</span> InputIter2&gt;
pair&lt;InputIter1, InputIter2&gt;
mismatch(InputIter1 first1, InputIter1 last1, InputIter2 first2)
{
    <span class="hljs-keyword">while</span> (first1 != last1 &amp;&amp; *first1 == *first2)
    {
        ++first1;
        ++first2;
    }
    <span class="hljs-keyword">return</span> pair&lt;InputIter1, InputIter2&gt;(first1, first2);
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter1, <span class="hljs-keyword">typename</span> InputIter2, <span class="hljs-keyword">typename</span> BinaryPredicate&gt;
pair&lt;InputIter1, InputIter2&gt;
mismatch(InputIter1 first1, InputIter1 last1, InputIter2 first2, BinaryPredicate binary_pred)
{
    <span class="hljs-keyword">while</span> (first1 != last1 &amp;&amp; binary_pred(*first1, *first2))
    {
        ++first1;
        ++first2;
    }
    <span class="hljs-keyword">return</span> pair&lt;InputIter1, InputIter2&gt;(first1, first2);
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter1, <span class="hljs-keyword">typename</span> InputIter2&gt;
<span class="hljs-keyword">inline</span> <span class="hljs-keyword">bool</span> equal(InputIter1 first1, InputIter1 last1, InputIter2 first2)
{
    <span class="hljs-keyword">for</span> ( ; first1 != last1; ++first1, ++first2)
        <span class="hljs-keyword">if</span> (!(*first1 == *first2))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter1, <span class="hljs-keyword">typename</span> InputIter2, <span class="hljs-keyword">typename</span> BinaryPredicate&gt;
<span class="hljs-keyword">inline</span> <span class="hljs-keyword">bool</span> equal(InputIter1 first1, InputIter1 last1,
                  InputIter2 first2, BinaryPredicate binary_pred)
{
    <span class="hljs-keyword">for</span> ( ; first1 != last1; ++first1, ++first2)
        <span class="hljs-keyword">if</span> (!binary_pred(*first1, *first2))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter1, <span class="hljs-keyword">typename</span> InputIter2&gt;
<span class="hljs-keyword">bool</span> lexicographical_compare(InputIter1 first1, InputIter1 last1,
                             InputIter2 first2, InputIter2 last2)
{
    <span class="hljs-keyword">for</span> ( ; first1 != last1 &amp;&amp; first2 != last2
            ; ++first1, ++first2)
    {
        <span class="hljs-keyword">if</span> (*first1 &lt; *first2)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">if</span> (*first2 &lt; *first1)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-keyword">return</span> first1 == last1 &amp;&amp; first2 != last2;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter1, <span class="hljs-keyword">typename</span> InputIter2, <span class="hljs-keyword">typename</span> Compare&gt;
<span class="hljs-keyword">bool</span> lexicographical_compare(InputIter1 first1, InputIter1 last1,
                             InputIter2 first2, InputIter2 last2, Compare comp)
{
    <span class="hljs-keyword">for</span> ( ; first1 != last1 &amp;&amp; first2 != last2
            ; ++first1, ++first2)
    {
        <span class="hljs-keyword">if</span> (comp(*first1, *first2))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">if</span> (comp(*first2, *first1))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-keyword">return</span> first1 == last1 &amp;&amp; first2 != last2;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIterator, <span class="hljs-keyword">typename</span> OutputIterator&gt;
OutputIterator copy(InputIterator first, InputIterator last, OutputIterator result)
{
    <span class="hljs-keyword">while</span> (first!=last)
    {
        *result = *first;
        ++result;
        ++first;
    }
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> BidirectionalIterator1, <span class="hljs-keyword">typename</span> BidirectionalIterator2&gt;
BidirectionalIterator2
copy_backward(BidirectionalIterator1 first, BidirectionalIterator1 last,
              BidirectionalIterator2 result)
{
    <span class="hljs-keyword">while</span> (last!=first) *(--result) = *(--last);
    <span class="hljs-keyword">return</span> result;
}</code></pre>

<p>sgi为了提高效率，很多算法都有特化版本，然而我为了简单起见，将所有特化版本都删除了，下面以copy的完整版本为例说明。</p>

<pre><code>template &lt;typename InputIter, typename OutputIter&gt;
inline OutputIter copy(InputIter first, InputIter last, OutputIter result);
</code></pre>

<div class="flow-chart"><svg height="1421.677734375" version="1.1" width="1374.119140625" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative; top: 0.3125px;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.1.0</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><marker id="raphael-marker-endblock33" markerHeight="3" markerWidth="3" orient="auto" refX="1.5" refY="1.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block" transform="rotate(180 1.5 1.5) scale(0.6,0.6)" stroke-width="1.6667" fill="black" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker></defs><rect x="0" y="0" width="52" height="39" r="20" rx="20" ry="20" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="st" transform="matrix(1,0,0,1,171.9297,80.4004)"></rect><text x="10" y="19.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="stt" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,171.9297,80.4004)"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">开始</tspan></text><rect x="0" y="0" width="387.859375" height="39" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op1" transform="matrix(1,0,0,1,4,249.8008)"></rect><text x="10" y="19.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="op1t" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,4,249.8008)"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">如果InputIter是normal_iterator, 提取出first和last的base()</tspan></text><rect x="0" y="0" width="372.390625" height="39" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op2" transform="matrix(1,0,0,1,11.7344,419.2012)"></rect><text x="10" y="19.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="op2t" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,11.7344,419.2012)"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">如果OutputIter是normal_iterator, 提取出result的base()</tspan></text><rect x="0" y="0" width="188.515625" height="39" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op3" transform="matrix(1,0,0,1,103.6719,588.6016)"></rect><text x="10" y="19.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="op3t" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,103.6719,588.6016)"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">提取出first所指向的型别T</tspan></text><path fill="#ffffff" stroke="#000000" d="M95.900390625,47.9501953125L0,95.900390625L191.80078125,191.80078125L383.6015625,95.900390625L191.80078125,0L0,95.900390625" stroke-width="2" font-family="sans-serif" font-weight="normal" id="cd1" class="flowchart" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;" transform="matrix(1,0,0,1,6.1289,681.6016)"></path><text x="100.900390625" y="95.900390625" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="cd1t" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,6.1289,681.6016)"><tspan dy="5.509765625" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">T has_trivial_assignment_operator?</tspan></text><path fill="#ffffff" stroke="#000000" d="M57.57421875,28.787109375L0,57.57421875L115.1484375,115.1484375L230.296875,57.57421875L115.1484375,0L0,57.57421875" stroke-width="2" font-family="sans-serif" font-weight="normal" id="cd2" class="flowchart" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;" transform="matrix(1,0,0,1,82.7813,965.7285)"></path><text x="62.57421875" y="57.57421875" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="cd2t" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,82.7813,965.7285)"><tspan dy="5.51171875" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">InputIter is pointer?</tspan></text><rect x="0" y="0" width="133.671875" height="39" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op4" transform="matrix(1,0,0,1,131.0938,1211.2773)"></rect><text x="10" y="19.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="op4t" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,131.0938,1211.2773)"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">use __copy_trivial</tspan></text><rect x="0" y="0" width="52" height="39" r="20" rx="20" ry="20" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="ed" transform="matrix(1,0,0,1,171.9297,1380.6777)"></rect><text x="10" y="19.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="edt" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,171.9297,1380.6777)"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">结束</tspan></text><path fill="#ffffff" stroke="#000000" d="M85.892578125,42.9462890625L0,85.892578125L171.78515625,171.78515625L343.5703125,85.892578125L171.78515625,0L0,85.892578125" stroke-width="2" font-family="sans-serif" font-weight="normal" id="cd3" class="flowchart" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;" transform="matrix(1,0,0,1,389.2227,937.4102)"></path><text x="90.892578125" y="85.892578125" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="cd3t" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,389.2227,937.4102)"><tspan dy="5.501953125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">first is random_access_iterator?</tspan></text><rect x="0" y="0" width="240.828125" height="39" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op5" transform="matrix(1,0,0,1,440.5938,1239.5957)"></rect><text x="10" y="19.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="op5t" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,440.5938,1239.5957)"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">use 用整数进行循环计数的__copy</tspan></text><rect x="0" y="0" width="150.828125" height="39" r="0" rx="0" ry="0" fill="#ffffff" stroke="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" stroke-width="2" class="flowchart" id="op6" transform="matrix(1,0,0,1,905.3086,1003.8027)"></rect><text x="10" y="19.5" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" id="op6t" class="flowchartt" font-size="14px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,905.3086,1003.8027)"><tspan dy="5.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">use 最普通的__copy</tspan><tspan dy="18" x="10" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></tspan></text><path fill="none" stroke="#000000" d="M197.9296875,119.400390625C197.9296875,119.400390625,197.9296875,227.30616792896762,197.9296875,246.8008640239227" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M197.9296875,288.80078125C197.9296875,288.80078125,197.9296875,396.7065585539676,197.9296875,416.2012546489227" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M197.9296875,458.201171875C197.9296875,458.201171875,197.9296875,566.1069491789676,197.9296875,585.6016452739227" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M197.9296875,627.6015625C197.9296875,627.6015625,197.9296875,667.2556624412537,197.9296875,678.6020015846007" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M197.9296875,873.40234375C197.9296875,873.40234375,197.9296875,946.8777538682334,197.9296875,962.7352398410162" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><text x="202.9296875" y="883.40234375" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" font-size="14px" font-family="sans-serif" font-weight="normal"><tspan dy="5.51171875" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">yes</tspan></text><path fill="none" stroke="#000000" d="M389.73046875,777.501953125C389.73046875,777.501953125,561.0078125,777.501953125,561.0078125,777.501953125C561.0078125,777.501953125,561.0078125,912.4663703880506,561.0078125,934.4112683121697" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><text x="394.73046875" y="767.501953125" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" font-size="14px" font-family="sans-serif" font-weight="normal"><tspan dy="5.501953125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">no</tspan></text><path fill="none" stroke="#000000" d="M197.9296875,1080.876953125C197.9296875,1080.876953125,197.9296875,1188.7827304289676,197.9296875,1208.2774265239227" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><text x="202.9296875" y="1090.876953125" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" font-size="14px" font-family="sans-serif" font-weight="normal"><tspan dy="5.501953125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">yes</tspan></text><path fill="none" stroke="#000000" d="M313.078125,1023.302734375C313.078125,1023.302734375,372.09419238287956,1023.302734375,386.2142475672599,1023.302734375" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><text x="318.078125" y="1013.302734375" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" font-size="14px" font-family="sans-serif" font-weight="normal"><tspan dy="5.505859375" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">no</tspan></text><path fill="none" stroke="#000000" d="M197.9296875,1250.27734375C197.9296875,1250.27734375,197.9296875,1358.1831210539676,197.9296875,1377.6778171489227" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M561.0078125,1109.1953125C561.0078125,1109.1953125,561.0078125,1217.1010898039676,561.0078125,1236.5957858989227" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><text x="566.0078125" y="1119.1953125" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" font-size="14px" font-family="sans-serif" font-weight="normal"><tspan dy="5.5078125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">yes</tspan></text><path fill="none" stroke="#000000" d="M732.79296875,1023.302734375C732.79296875,1023.302734375,879.4059791564941,1023.302734375,902.3142620325089,1023.302734375" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><text x="737.79296875" y="1013.302734375" text-anchor="start" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; line-height: normal; font-family: sans-serif;" font-size="14px" font-family="sans-serif" font-weight="normal"><tspan dy="5.505859375" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">no</tspan></text><path fill="none" stroke="#000000" d="M561.0078125,1278.595703125C561.0078125,1278.595703125,561.0078125,1355.677734375,561.0078125,1355.677734375C561.0078125,1355.677734375,197.9296875,1355.677734375,197.9296875,1355.677734375C197.9296875,1355.677734375,197.9296875,1371.05117893219,197.9296875,1377.6869821492583" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path><path fill="none" stroke="#000000" d="M980.72265625,1042.802734375C980.72265625,1042.802734375,980.72265625,1355.677734375,980.72265625,1355.677734375C980.72265625,1355.677734375,197.9296875,1355.677734375,197.9296875,1355.677734375C197.9296875,1355.677734375,197.9296875,1371.05117893219,197.9296875,1377.6869821492583" stroke-width="2" marker-end="url(#raphael-marker-endblock33)" font-family="sans-serif" font-weight="normal" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;"></path></svg></div>

<pre class="prettyprint"><code class="language-cpp hljs "><span class="hljs-comment">// copy.h</span>
<span class="hljs-comment">/**
所有的这些辅助函数有两个目的:
1.如果可能则使用memmove(非memcpy, memmove允许输入输出序列重叠);
2.如果原序列使用随机访问迭代器, 使用整数计数而不是通过比较迭代器来终止循环.
*/</span>

<span class="hljs-comment">// __normal_iterator将普通指针封装起来, 在stl_iterator.h中定义</span>
<span class="hljs-comment">// __type_traits用来提取type的特性, 在type_traits.h中定义</span>
<span class="hljs-comment">// __value_type和__distance_type在stl_iterator_base_types.h中定义</span>

<span class="hljs-comment">/**
为了测试, 我添加了一些输出语句.
因我是在gcc4.7.1中测试的, 需要将type_traits.h拷贝过来一起编译,
且需对其做些改动, 改动的地方在下面type_traits.h中说明.
*/</span>
<span class="hljs-comment">// 另外还将__value_type和__distance_type从stl_iterator_base_types.h中拷贝过来.</span>

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> Iter&gt;
<span class="hljs-keyword">inline</span> <span class="hljs-keyword">typename</span> iterator_traits&lt;Iter&gt;::value_type*
__value_type(<span class="hljs-keyword">const</span> Iter&amp;)
{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">typename</span> iterator_traits&lt;Iter&gt;::value_type*&gt;(<span class="hljs-number">0</span>);
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> Iter&gt;
<span class="hljs-keyword">inline</span> <span class="hljs-keyword">typename</span> iterator_traits&lt;Iter&gt;::difference_type*
__distance_type(<span class="hljs-keyword">const</span> Iter&amp;)
{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">typename</span> iterator_traits&lt;Iter&gt;::difference_type*&gt;(<span class="hljs-number">0</span>);
}

<span class="hljs-comment">// copy的真正实现</span>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter, <span class="hljs-keyword">typename</span> OutputIter, <span class="hljs-keyword">typename</span> Distance&gt;
<span class="hljs-keyword">inline</span> OutputIter __copy(InputIter first, InputIter last,
                         OutputIter result,
                         input_iterator_tag, Distance*)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy: with iterator.\n"</span>;
    <span class="hljs-keyword">for</span> ( ; first != last; ++result, ++first)
        *result = *first;
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// 对随机访问迭代器的特化</span>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> RandomAccessIter, <span class="hljs-keyword">typename</span> OutputIter, <span class="hljs-keyword">typename</span> Distance&gt;
<span class="hljs-keyword">inline</span> OutputIter
__copy(RandomAccessIter first, RandomAccessIter last,
       OutputIter result, random_access_iterator_tag, Distance*)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy: with int.\n"</span>;
    <span class="hljs-keyword">for</span> (Distance n = last - first; n &gt; <span class="hljs-number">0</span>; --n)
    {
        *result = *first;
        ++first;
        ++result;
    }
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// 对普通指针的特化</span>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">inline</span> T*
__copy_trivial(<span class="hljs-keyword">const</span> T* first, <span class="hljs-keyword">const</span> T* last, T* result)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy_trivial.\n"</span>;
    memmove(result, first, <span class="hljs-keyword">sizeof</span>(T) * (last - first));
    <span class="hljs-keyword">return</span> result + (last - first);
}


<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter, <span class="hljs-keyword">typename</span> OutputIter&gt;
<span class="hljs-keyword">inline</span> OutputIter __copy_aux2(InputIter first, InputIter last,
                              OutputIter result, __false_type)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy_aux2: *InputIter is not trivial.\n"</span>;
    <span class="hljs-keyword">return</span> __copy(first, last, result,
                  __iterator_category(first),
                  __distance_type(first));
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter, <span class="hljs-keyword">typename</span> OutputIter&gt;
<span class="hljs-keyword">inline</span> OutputIter __copy_aux2(InputIter first, InputIter last,
                              OutputIter result, __true_type)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy_aux2: *InputIter is trivial.\n"</span>;
    <span class="hljs-keyword">return</span> __copy(first, last, result,
                  __iterator_category(first),
                  __distance_type(first));
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">inline</span> T* __copy_aux2(T* first, T* last, T* result, __true_type)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy_aux2: InputIter is T*.\n"</span>;
    <span class="hljs-keyword">return</span> __copy_trivial(first, last, result);
}

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">inline</span> T* __copy_aux2(<span class="hljs-keyword">const</span> T* first, <span class="hljs-keyword">const</span> T* last, T* result, __true_type)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy_aux2: InputIter is const T*.\n"</span>;
    <span class="hljs-keyword">return</span> __copy_trivial(first, last, result);
}


<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter, <span class="hljs-keyword">typename</span> OutputIter, <span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">inline</span> OutputIter __copy_aux(InputIter first, InputIter last,
                             OutputIter result, T*)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy_aux.\n"</span>;
    <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> __type_traits&lt;T&gt;::has_trivial_assignment_operator Trivial;
    <span class="hljs-keyword">return</span> __copy_aux2(first, last, result, Trivial());
}

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> InputIter, <span class="hljs-keyword">typename</span> OutputIter&gt;
<span class="hljs-keyword">inline</span> OutputIter __copy_ni2(InputIter first, InputIter last,
                             OutputIter result, __true_type)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy_ni2: OutputIter is normal_iterator.\n"</span>;
    <span class="hljs-keyword">return</span> OutputIter(__copy_aux(first, last, result.base(), __value_type(first)));
}

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> InputIter, <span class="hljs-keyword">typename</span> OutputIter&gt;
<span class="hljs-keyword">inline</span> OutputIter __copy_ni2(InputIter first, InputIter last,
                             OutputIter result, __false_type)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy_ni2: OutputIter is not normal_iterator.\n"</span>;
    <span class="hljs-keyword">return</span> __copy_aux(first, last, result, __value_type(first));
}

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> InputIter, <span class="hljs-keyword">typename</span> OutputIter&gt;
<span class="hljs-keyword">inline</span> OutputIter __copy_ni1(InputIter first, InputIter last,
                             OutputIter result, __true_type)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy_ni1: InputIter is normal_iterator.\n"</span>;
    <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Is_normal_iterator&lt;OutputIter&gt;::_Normal Normal;
    <span class="hljs-keyword">return</span> __copy_ni2(first.base(), last.base(), result, Normal());
}

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> InputIter, <span class="hljs-keyword">typename</span> OutputIter&gt;
<span class="hljs-keyword">inline</span> OutputIter __copy_ni1(InputIter first, InputIter last,
                             OutputIter result, __false_type)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"copy_ni1: InputIter is not normal_iterator.\n"</span>;
    <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Is_normal_iterator&lt;OutputIter&gt;::_Normal Normal;
    <span class="hljs-keyword">return</span> __copy_ni2(first, last, result, Normal());
}

<span class="hljs-comment">// 因copy已在库中定义, 我便改了个名字</span>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> InputIter, <span class="hljs-keyword">typename</span> OutputIter&gt;
<span class="hljs-keyword">inline</span> OutputIter mycopy(InputIter first, InputIter last, OutputIter result)
{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"mycopy.\n"</span>;
    <span class="hljs-keyword">typedef</span> <span class="hljs-keyword">typename</span> _Is_normal_iterator&lt;InputIter&gt;::_Normal Normal;
    <span class="hljs-keyword">return</span> __copy_ni1(first, last, result, Normal());
}</code></pre>

<p>修改后的type_traits.h（与原版本相比做了很多删减，和一些修改）：</p>

<pre class="prettyprint"><code class="language-cpp hljs "><span class="hljs-comment">// type_traits.h</span>
<span class="hljs-comment">// __true_type和__false_type已在其他地方定义, 因此将其从原版文件中删掉</span>
<span class="hljs-comment">// __normal_iterator定义在命名空间__gnu_cxx中, 而非旧版本的std, 在此文件的结尾将其修改</span>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> _Tp&gt;
<span class="hljs-keyword">struct</span> __type_traits
{
    <span class="hljs-keyword">typedef</span> __false_type    has_trivial_default_constructor;
    <span class="hljs-keyword">typedef</span> __false_type    has_trivial_copy_constructor;
    <span class="hljs-keyword">typedef</span> __false_type    has_trivial_assignment_operator;
    <span class="hljs-keyword">typedef</span> __false_type    has_trivial_destructor;
    <span class="hljs-keyword">typedef</span> __false_type    is_POD_type;
};

<span class="hljs-keyword">template</span>&lt;&gt; <span class="hljs-keyword">struct</span> __type_traits&lt;<span class="hljs-keyword">int</span>&gt;
{
    <span class="hljs-keyword">typedef</span> __true_type    has_trivial_default_constructor;
    <span class="hljs-keyword">typedef</span> __true_type    has_trivial_copy_constructor;
    <span class="hljs-keyword">typedef</span> __true_type    has_trivial_assignment_operator;
    <span class="hljs-keyword">typedef</span> __true_type    has_trivial_destructor;
    <span class="hljs-keyword">typedef</span> __true_type    is_POD_type;
};

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> _Tp&gt;
<span class="hljs-keyword">struct</span> __type_traits&lt;_Tp*&gt;
{
    <span class="hljs-keyword">typedef</span> __true_type    has_trivial_default_constructor;
    <span class="hljs-keyword">typedef</span> __true_type    has_trivial_copy_constructor;
    <span class="hljs-keyword">typedef</span> __true_type    has_trivial_assignment_operator;
    <span class="hljs-keyword">typedef</span> __true_type    has_trivial_destructor;
    <span class="hljs-keyword">typedef</span> __true_type    is_POD_type;
};

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Tp&gt; <span class="hljs-keyword">struct</span> _Is_normal_iterator
{
    <span class="hljs-keyword">typedef</span> __false_type _Normal;
};

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> _Iterator, <span class="hljs-keyword">typename</span> _Container&gt;
<span class="hljs-keyword">struct</span> _Is_normal_iterator&lt; __gnu_cxx::__normal_iterator&lt;_Iterator, _Container&gt; &gt;
{
    <span class="hljs-keyword">typedef</span> __true_type _Normal;
};</code></pre>

<p>测试源文件：</p>

<pre class="prettyprint"><code class="language-cpp hljs "><span class="hljs-preprocessor">#include &lt;iostream&gt;</span>
<span class="hljs-preprocessor">#include &lt;vector&gt;</span>
<span class="hljs-preprocessor">#include &lt;iterator&gt;</span>
<span class="hljs-preprocessor">#include &lt;cstring&gt;</span>
<span class="hljs-preprocessor">#include &lt;deque&gt;</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-preprocessor">#include "type_traits.h"</span>
<span class="hljs-preprocessor">#include "copy.h"</span>

<span class="hljs-keyword">struct</span> myint
{
    myint(<span class="hljs-keyword">int</span> m=<span class="hljs-number">0</span>):i(m){}
    myint &amp;<span class="hljs-keyword">operator</span>=(myint m){i=m.i;<span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;}
    <span class="hljs-keyword">int</span> i;
};

<span class="hljs-comment">// 为__type_traits做一个特化</span>
<span class="hljs-keyword">template</span>&lt;&gt; <span class="hljs-keyword">struct</span> __type_traits&lt;myint&gt; {
   <span class="hljs-keyword">typedef</span> __true_type    has_trivial_default_constructor;
   <span class="hljs-keyword">typedef</span> __true_type    has_trivial_copy_constructor;
   <span class="hljs-keyword">typedef</span> __true_type    has_trivial_assignment_operator;
   <span class="hljs-keyword">typedef</span> __true_type    has_trivial_destructor;
   <span class="hljs-keyword">typedef</span> __true_type    is_POD_type;
};

<span class="hljs-keyword">int</span> main()
{
    <span class="hljs-keyword">int</span> ia[] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>};
    <span class="hljs-keyword">int</span> iaa[<span class="hljs-number">3</span>];
    <span class="hljs-stl_container"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;</span> iv(ia,ia+<span class="hljs-number">3</span>);
    <span class="hljs-stl_container"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;</span> ivv(<span class="hljs-number">3</span>);
    <span class="hljs-comment">// vector的迭代器是normal_iterator</span>
    <span class="hljs-keyword">int</span> *a = iv.begin().base();
    <span class="hljs-keyword">int</span> *b = iv.end().base();
    <span class="hljs-keyword">int</span> *c = ivv.begin().base();
    mycopy(a,b,c);

    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"----------------------------\n"</span>;
    mycopy(iv.begin(),iv.end(),ivv.begin());

    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"----------------------------\n"</span>;
    mycopy(ia,ia+<span class="hljs-number">3</span>,iaa);

    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"----------------------------\n"</span>;
    <span class="hljs-stl_container"><span class="hljs-built_in">deque</span>&lt;<span class="hljs-keyword">int</span>&gt;</span> de(ia,ia+<span class="hljs-number">3</span>);
    <span class="hljs-stl_container"><span class="hljs-built_in">deque</span>&lt;<span class="hljs-keyword">int</span>&gt;</span> dee(<span class="hljs-number">3</span>);
    mycopy(de.begin(),de.end(),dee.begin());

    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"----------------------------\n"</span>;
    <span class="hljs-stl_container"><span class="hljs-built_in">vector</span>&lt;myint&gt;</span> mi(ia,ia+<span class="hljs-number">3</span>);
    <span class="hljs-stl_container"><span class="hljs-built_in">vector</span>&lt;myint&gt;</span> mii(<span class="hljs-number">3</span>);
    mycopy(mi.begin(),mi.end(),mii.begin());
    <span class="hljs-built_in">cout</span> &lt;&lt; mii[<span class="hljs-number">0</span>].i &lt;&lt; endl;

    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"----------------------------\n"</span>;
    <span class="hljs-stl_container"><span class="hljs-built_in">deque</span>&lt;myint&gt;</span> dd(ia,ia+<span class="hljs-number">3</span>);
    <span class="hljs-stl_container"><span class="hljs-built_in">deque</span>&lt;myint&gt;</span> ddd(<span class="hljs-number">3</span>);
    mycopy(dd.begin(),dd.end(),ddd.begin());
    <span class="hljs-built_in">cout</span> &lt;&lt; ddd.begin()-&gt;i;

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre></div></body>
</html>